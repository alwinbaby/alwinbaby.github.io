<!DOCTYPE html>
<html lang="en">
<head>
  <title>MQTT WebSocket Demo</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
  <script language="javascript" type="text/javascript">
  var mqtt;
  var ReconnectTimeout=2000;
  //var host="ws//127.0.0.1:5500";
  //var port=1883; 


function onConnect() {
    // Once a connection has been made, make a subscription and send a message.
    console.log("Connected");
    message = new Paho.MQTT.Message("Hello");
    message.destinationName = "Sensor1";
    mqtt.send(message);
    document.getElementById("status").innerHTML="This is a test";
  }
  function MQTTconnect(){
    console.log("Connecting to "+ port);
    var port=document.getElementById("port").value;
    var host=document.getElementById("host").String;
    mqtt=new Paho.MQTT.Client(host, port,"MQTTjs-unIoRrIVeT");
    var options={
      timeout:3,
      onSuccess:onConnect,
    };
    mqtt.connect(options); 
  }



    </script>

</head>
<body>
  <script>
  </script>
  <form action= MQTTconnect();>
  <label for="host">Host</label><br>
  <input placeholer="Host" id="host"></input>
  <label for="Port">Port</label><br>
  <input placeholer="Port" id="port"></input>
  <h1 id="demo"></h1>
  <input type="submit" value="Submit">
</form> 


</body>
</html>
